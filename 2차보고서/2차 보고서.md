# **2차 보고서**

## 

1. ## **Team Info**

### **1.1 과제명:** ~~AI 기반 소도시 여행 추천 및 지역 경제 활성화 통합 플랫폼~~ 

###                  RAG 기반 소도시 여행지 추천 및 로컬 커머스 통합 플랫폼

### **1.2 팀 정보:** 12팀 내가그린

### **1.3 팀 구성원:** 2271005 강다혜, 2271024 김희서, 2271042 윤가빈

2. ## **Project-Summary**

### **2.1 문제 정의**

**여행객**의 Pain Point (관광 데이터 비대칭성 및 정보 접근성 문제)

1. **정보 탐색의 비효율성**: 다수의 여행 트렌드 보고서에 따르면, MZ세대를 중심으로 한 여행객들은 공식 홈페이지보다는 SNS(인스타그램), 개인 블로그, 유튜브 등 **파편화된 채널**을 통해 여행 정보를 얻는 경향이 강합니다. 이는 소도시의 숨겨진 명소나 축제 정보를 한곳에서 체계적으로 얻기 어렵다는 것을 의미합니다. 지방자치단체나 지역 축제 위원회는 한정된 예산과 인력으로 인해 효과적인 디지털 마케팅을 수행하기 어렵습니다. 이로 인해 관광객들은 소도시의 숨겨진 명소나 지역 축제 정보를 찾는 데 어려움을 느낍니다.  
2. **여행지 편중 심화**: 문화체육관광부의 '2023 국민여행조사'에서도 내국인 여행객이 제주, 부산 등 전통적인 관광지만을 선호하는 경향이 뚜렷하다는 결과를 보이고 있습니다. 또한 외래 관광객의 78.5%가 서울을 방문하는 등 특정 지역 편중 현상이 심각하며, '남들과 다른 경험'을 원하는 잠재적 소도시 여행객이 **숨겨진 매력**을 찾기 어렵습니다.

**소상공인**의 Pain Point (지역 경제 활성화의 한계)

1. **디지털 마케팅의 한계**: 소상공인시장진흥공단의 실태조사에 따르면, 특히 고령층이 많거나 소규모인 지역 소상공인들의 온라인 스토어(e-commerce) 도입 및 활용률은 여전히 낮은 수준에 머물러 있습니다. 이는 입점 절차의 복잡성, 높은 수수료, 운영 부담 등이 주요 원인으로 꼽힙니다. 대부분의 지역 특산물 판매점이나 소규모 가게들은 여전히 현장 방문객에 대한 의존도가 절대적입니다  
2. **단발성 매출**: 여행객이 떠난 후에는 소비가 단절되어 지속적인 수익 창출로 이어지기 어려운 구조임을 보여줍니다. 온라인 판매 채널이 부재하여 지역 소상공인들이 상품을 효과적으로 홍보하고 판매하는 데 어려움이 있습니다.

위의 pain point에 따라 “소소행”의 타겟 사용자는 다음과 같습니다.

**타겟 사용자 (Target User)**  
●      **20\~30대 밀레니얼/Z세대 여행객**: SNS를 통해 정보를 탐색하며, 기존 인기 관광지보다 '나만의 특별한 경험', '남들과 다른 소소한 소도시 여행'을 추구하는 잠재적 소도시 방문객.  
●      **지역 소상공인**: 온라인 마케팅 예산 및 인력이 부족하여 우수한 지역 특산품이나 서비스를 효과적으로 홍보하고 판매 채널을 확보하는 데 어려움을 겪는 주체.

### **2.2 기존 연구와의 비교**

| 비교 항목 | A사 (일반 여행 플랫폼, 예: 마이리얼트립) | B사 (지역 축제정보 플랫폼, 예: 대한민국 구석구석) | 우리 플랫폼 (소소행) |
| :---: | ----- | ----- | ----- |
| **주요 서비스 범위** | 숙소/항공 예약 중심 | 지역 축제/관광지 단순 정보 나열 | AI 추천, 축제 정보, 로컬 마켓 통합 |
| **추천 기술** | 통계 기반, 평점/키워드 매칭 | 수동 검색 및 카테고리 분류 | RAG \+ LLM 기반 지능형 대화 추천 |
| **지역 경제 연계** | 대형 프랜차이즈 및 숙소 중심 | 연계성 없음 | 소상공인 상품/서비스 직접 연동 |
| **차별점** | 단순 예약/정보 제공에 그침 | 검색/필터링 등 사용자 경험 미흡 | RAG와 LLM을 활용한 정보의 질적 향상 및 실질적인 지역 소비 유도 |

 

1. **단순 정보 제공 vs. 능동적 맞춤 추천**  
   **기존 서비스의 한계**: '대한민국 구석구석'이나 '네이버/카카오맵'과 같은 서비스는 방대한 데이터를 제공하는 훌륭한 '디지털 지도' 또는 '검색 엔진'의 역할을 합니다. 하지만 사용자가 직접 키워드를 입력하거나 필터를 설정해야 하는 수동적인 방식에 머물러 있습니다. "조용한 분위기에서 책 읽기 좋은 카페가 있는 한적한 여행지"와 같은 복합적이고 감성적인 취향을 반영한 추천은 불가능합니다.  
     
   **소소행의 해결 방안**: '소소행'은 단순 정보 제공자를 넘어, 사용자와 대화하는 '능동형 추천 챗봇'를 지향합니다.  
     
2. **단절된 서비스 vs. 통합 플랫폼 경험**  
   **기존 서비스의 한계**: 현재 사용자는 완벽한 소도시 여행을 위해 여러 서비스를 넘나들어야 합니다. 예를 들어, 카카오맵으로 동선을 짜고, 인스타그램에서 '힙한' 장소를 찾고, 지역 시청 홈페이지에서 축제 정보를 확인하고, '아이디어스' 같은 앱에서 로컬 상품을 구경하는 등 경험이 완전히 파편화되어 있습니다.  
     
   **소소행의 해결 방안**: '소소행'은 관광-축제-로컬 마켓을 융합한 '올인원(All-in-one) 플랫폼'을 제공하여 이러한 불편함을 해소합니다.

3.  **AI 추천의 깊이와 신뢰도 부재**  
   **기존 서비스의 한계**: ‘대한민국 구석구석’과 같은 일부 서비스에 ‘AI 추천’ 기능이 존재하지만, 대부분 ‘블랙박스(Black Box)’처럼 작동합니다. 사용자에게 추천 결과를 목록으로 제시할 뿐, ‘왜’ 이 장소를 나에게 추천하는지에 대한 구체적인 이유나 근거를 알려주지 않습니다. 이로 인해 사용자는 추천을 신뢰하기 어렵고, 결국 다시 직접 정보를 검증해야 하는 불편함을 겪게 됩니다.  
     
   **소소행의 해결 방안:** ‘소소행’은 ‘근거 기반의 신뢰할 수 있는 AI 추천’을 제공하여 이 문제를 해결합니다. RAG 기술을 활용하여, 저희 AI는 단순히 결과를 나열하는 것이 아니라 “최근 ‘한적한’ 키워드를 자주 검색하셨고, 이 장소의 최신 후기에 ‘조용히 산책하기 좋았다’는 내용이 있어 추천해 드려요.” 와 같이 추천의 명확한 근거를 함께 제시합니다.  
   

### **2.3 제안 내용**

본 과제는 파편화된 정보와 지역 경제와의 단절이라는 기존 여행 방식의 **문제점**을 해결하기 위해, AI  RAG기술을 중심으로 사용자 맞춤형 여행 경험과 지역 경제 활성화를 동시에 추구하는 통합 플랫폼을 제안합니다.

**Pain Point**

1. **획일화된 여행 정보의 한계**: 사용자의 취향과 의도를 고려하지 않은 일반적인 정보의 나열은 만족스러운 여행 경험을 제공하기 어렵습니다.  
2. **관광객과 지역 소상공인의 단절**: 여행객들은 지역의 특색 있는 상품을 발견하기 어렵고, 소상공인은 효과적인 홍보 및 판매 채널이 부족하여 관광 수익이 지역 경제로 선순환되지 못합니다.  
3. **실시간 지역 콘텐츠 탐색의 어려움**: 여행 중 주변의 숨은 명소나 갑자기 열리는 축제, 행사 정보를 실시간으로 파악하기 어려워 즉흥적이고 풍부한 경험의 기회를 놓치게 됩니다.

**Solution**  
이러한 문제점을 해결하기 위해 3가지 핵심 기능을 중심으로 솔루션을 구축합니다.

**1\. AI 기반 초개인화 여행 추천**  
사용자의 숨은 취향까지 파악하여 최적의 여행을 설계합니다. AI 챗봇과의 대화, 검색 기록, '찜' 목록 등 모든 활동 데이터를 실시간으로 분석하여 입체적인 개인 프로필을 구축합니다. 이 프로필을 **RAG(Retrieval-Augmented Generation) 기술**과 결합하여 신뢰도 높은 최신 관광 정보를 바탕으로 사용자만을 위한 맞춤형 여행지를 생성하고 추천합니다.

**2\. 지역 상생을 위한 소상공인 통합 마켓**  
여행 경험을 지역 경제 활성화로 직접 연결합니다. AI가 특정 지역을 추천하면, 해당 지역의 **소상공인이 직접 등록한 특산물과 스토리가 담긴 상품을 함께 노출**합니다. 이를 통해 여행객은 특색 있는 기념품을 쉽게 발견하고 구매할 수 있으며, 여행이 끝난 후에도 앱을 통해 언제든 재구매가 가능해 일회성 방문을 지속 가능한 관계로 발전시킵니다.

**3\. 실시간 위치 기반 정보 제공 (LBS)**  
관광공사 등 외부 API와 연동하여 전국의 축제 및 행사의 최신 정보를 자동으로 수집하고, **사용자의 현재 위치를 기반으로 '내 주변'의 숨은 명소나 즐길 거리를 실시간으로 추천**합니다. 이는 수동적인 정보 검색을 넘어, '지금 여기에서만' 가능한 특별한 경험을 능동적으로 제안하여 여행의 만족도를 극대화합니다.  
 

### **2.4 기대 효과 및 의의**

본 프로젝트는 사용자 경험과 지역 사회 기여라는 두 가지 측면에서 혁신적인 기대 효과를 가져올 것입니다.

**1\. 경제적/지역적 기대 효과**

*  **소도시 관광 활성화 촉진**: AI를 통해 20곳 이상의 소도시 숨겨진 명소를 발굴하고 효과적으로 노출하여, 관광객의 수도권 편중 현상을 완화하고 관광객 분산에 기여합니다.  
* **지역 소상공인 판로 개척**: 마켓 기능을 통해 지역 특산물 및 수공예품의 온라인 판로를 확보하고, ~~gRPC 기반의 실시간 통신은~~ RESTful API 기반의 게시판 소통 채널은 소상공인이 복잡한 e-commerce 절차 없이도 상품을 등록하고 **구매자와 효율적으로 소통**할 수 있도록 지원합니다.  
*  **지속 가능한 지역 경제 구축**: LLM 추천을 받은 후 구매한 로컬 상품의 만족도 데이터를 수집하고 이를 AI에 재반영하여, **여행-소비-재방문**의 선순환 구조를 만듭니다.


**2\. 사용자 경험 및 기술적 기대 효과**

* **맞춤형 여행 만족도 극대화**: RAG 기술을 통해 사용자 질문에 대한 90% **이상의 정확도**와 함께 추천 근거를 제시하여, 기존 여행 플랫폼 대비 정보에 대한 신뢰도와 사용자 만족도를 20% 이상 향상시킵니다.  
* **정보 접근성 혁신**: TourAPI 정보를 포함한 파편화된 데이터를 한 곳에 모으고 AI로 가공하여 제공함으로써, MZ세대 여행객의 비효율적인 정보 탐색 과정을 혁신적으로 단축합니다.  
* **첨단 기술 적용 사례 확보**: LLM 기반의 AI 추천 시스템과 ~~gRPC를 활용한 고성능 실시간 통신 기술을~~ Advanced RAG (HyDE, CoT) 기법을 지역 관광 플랫폼에 성공적으로 통합한 선도적인 기술 적용 사례를 확보합니다. 이를 통해 단순히 정보를 제공하는 수준을 넘어, **사용자의 숨겨진 의도까지 이해하는 지능형 서비스**의 구현 가능성을 제시합니다.

### **2.5 주요 기능 리스트**

| 기능 분류 | 주요 기능 리스트 |
| :---: | ----- |
| **AI 기반 추천** | 1\. RAG 기반 대화형 여행지 추천 및 질의응답 (TC-1) |
|  | 2\. 카테고리 기반 추천 및 상세 정보 제공 (TC-2, TC-3) |
|  | 3\. LBS 기반 현재 위치 주변 명소 실시간 추천 |
| **로컬 마켓** | 4\. 지역 특산물 및 상품 목록 조회/검색 (TC-6) |
|  | 5\. 판매자 및 상품 등록 기능 |
|  | 6\. 게시판 및 댓글을 통한 구매자-판매자 소통 기회 마련 |
| **정보 통합** | 7\. 한국관광공사 API를 통한 지역 축제 및 행사 정보 조회 (TC-5) |
|  | 8\. 찜하기(좋아요) 및 찜 수 실시간 반영 (TC-4) |
|  | 9\. 모바일 iOS 애플리케이션 All-in-One 서비스 |

## 

**Solution 1: AI 기반 초개인화 여행 추천**  
첫 번째 솔루션은 사용자의 숨은 취향까지 파악하여 최적의 여행 경험을 제공하는 '개인화된 여행 정보 추천'입니다. 이 솔루션을 구현하기 위해 다음과 같은 핵심 feature들을 개발했습니다.

* **Feature 1-1. RAG 추천 시스템**   
  사용자의 대화나 활동 기록을 바탕으로 의도를 파악하고, 내부 데이터베이스에서 가장 신뢰도 높은 정보를 검색(Retrieval)합니다. 이후 검색된 정보를 기반으로 OpenAI의 거대 언어 모델(LLM)이 답변을 생성(Generation)하는 RAG(Retrieval-Augmented Generation) feature를 적용했습니다. 이는 LLM의 환각(Hallucination) 현상을 방지하고, 사실에 기반한 고품질의 추천을 가능하게 합니다.  
*  **Feature 1-2. 프롬프트 엔지니어링**   
  단순히 정보를 나열하는 것을 넘어, 사용자의 감성을 자극하는 매력적인 추천문을 생성하기 위해 정교한 프롬프트 엔지니어링 feature를 도입했습니다. 이를 통해 AI가 생성하는 정보의 질과 가독성을 극대화하고, 사용자의 후기 및 평가 데이터를 지속적으로 반영하여 추천 품질을 고도화합니다.

**Solution 2: 소상공인 홍보 및 연결 지원**  
두 번째 솔루션은 관광객과 지역 소상공인을 직접 연결하여 여행 경험이 실질적인 지역 경제 활성화로 이어지도록 하는 '소상공인 연결 지원'입니다.

*  **Feature 2-1. 커머스 기능 API 및 DB 설계**   
  이 솔루션의 핵심 feature는 FastAPI 기반의 커머스 API 서버입니다. 상품 및 판매자 정보의 CRUD(생성, 조회, 수정, 삭제) 기능을 안정적으로 제공하며, 데이터베이스 설계 단계부터 관광 정보와 커머스 데이터를 유기적으로 연계했습니다. 이를 통해 특정 여행지 추천 시 해당 지역의 마켓 상품을 함께 노출하는 기능을 구현했습니다. ~~추가적으로 구매자와 판매자 간의 실시간 매칭을 위해 gRPC 기술을 feature로 도입하여 응답 속도를 높였습니다.~~ 추가적으로, 구매자와 판매자 간의 비동기적 소통을 위해 게시판 및 댓글 시스템을 도입했습니다. 이 시스템은 구매자가 댓글을 통해 구매 의사를 표시하고, 판매자가 이를 확인 후 답변을 주는 온라인 소통 창구 역할을 수행하여, 소상공인의 홍보 및 판매 효율성을 높입니다.

**Solution 3: 숨은 지역 명소 및 축제 실시간 추천**  
세 번째 솔루션은 사용자의 현재 위치를 중심으로 '지금, 여기에서' 즐길 수 있는 특별한 경험을 제공하는 '실시간 지역 콘텐츠 추천'입니다.

* **Feature 3-1. 외부 데이터 API 연동**   
  정보의 최신성과 정확성을 확보하기 위해, 한국관광공사의 TourAPI와 같은 외부 API를 연동하는 feature를 구현했습니다. 이 feature는 전국의 축제, 행사, 관광지 정보를 주기적으로 자동 수집 및 갱신하여, 사용자가 별도로 검색하지 않아도 항상 최신 정보를 접할 수 있도록 합니다.  
*  **Feature 3-2. 위치 기반 서비스(LBS) 구현**   
  '내 주변' 기능의 핵심 feature는 위치 기반 서비스(LBS) 구현입니다. 사용자의 현재 좌표를 받아 반경 내 여행지를 필터링하고, 거리순으로 정렬하는 로직을 통해 가장 가까운 명소나 축제를 실시간으로 추천합니다.

## 

##      **3\. Project-Design**

### 

### **3.1 요구사항 정의**

1. **기능적 요구사항 (Functional Requirements):**  
* **TC-1**: 사용자는 챗봇과 대화하며 원하는 여행지를 추천받을 수 있어야 한다.  
* **TC-2**: 사용자는 4가지 카테고리(자연 힐링, 액티비티, 전시/관람, 이색 체험) 중 하나를 선택하여 관련 여행지를 추천받을 수 있어야 한다.  
* **TC-3**: 추천된 여행지 목록에서 특정 장소를 선택하면 상세 정보를 확인할 수 있어야 한다.  
* **TC-4**: 추천 결과의 하트 버튼을 눌러 찜 목록에 추가하고, 찜 수를 확인할 수 있어야 한다.  
* **TC-5**: 사용자는 지역 축제 및 행사 정보를 조회할 수 있어야 한다.  
* **TC-6**: 사용자는 마켓에서 상품을 검색하고 찜하기에 추가할 수 있어야 한다.  
2. **비기능적 요구사항 (Non-Functional Requirements):**  
* **NFR-1**: 모바일 앱은 iOS 및 Android 환경에서 모두 호환되어야 한다.  
* **NFR-2**: 백엔드 API의 평균 응답 시간은 2초 이내여야 한다.  
* **NFR-3**: 서비스는 99%의 가용성을 보장해야 한다.  
* **NFR-4**: 사용자 데이터(찜하기, 장바구니 등)는 안정적으로 저장 및 관리되어야 한다.

### **3.2 전체 시스템 구성**

![시스템 구성도](https://raw.githubusercontent.com/CAPSTONEEEEE/NaegaGreen/refs/heads/main/2차보고서/SW구조도.png)

본 시스템, '소소행'은 사용자에게 맞춤형 여행 추천과 지역 로컬 마켓 연동 서비스를 제공하기 위해 **클라이언트-서버(Client-Server)** 아키텍처를 기반으로 설계되었습니다. 전체 구조는 클라이언트 계층, 백엔드 서버 계층(BE), 그리고 외부 API 및 데이터베이스 계층으로 명확히 분리되어 있습니다.

#### **클라이언트 (Frontend) 계층**

* **플랫폼**: **React Native**를 사용하여 iOS 및 Android 환경에 최적화된 모바일 애플리케이션을 개발합니다.  
* **인증 및 데이터 요청**: 사용자 인증은 **JWT(JSON Web Token)** 방식을 통해 처리하며, 사용자 활동(여행지 요청, 찜, 상품 조회 등)은 **Axios (HTTP 통신)** 를 통해 백엔드 서버로 전송됩니다.  
* **소통 기능**: 로컬 마켓에서 구매자와 판매자 간의 **게시물/댓글 기반 소통**은 표준 RESTful API 통신을 통해 처리되며 **비동기적 상호작용** 방식을 채택합니다.

#### **서버 (Backend) 계층**

* **배포 환경**: **Amazon EC2** 인스턴스에 **Docker 컨테이너**를 활용하여 안정적으로 배포되며, 전체 시스템은 **Python (FastAPI)** 프레임워크를 기반으로 구축되어 고성능의 비동기 API 서비스를 제공합니다.  
* **핵심 기능 모듈**:  
  * **Recommend Feature (AI 추천)**: RAG 파이프라인을 구현하는 핵심 모듈입니다. 사용자 요청을 받아 Vector DB에서 관련 데이터를 검색(Retrieval)하고, OpenAI LLM을 사용하여 최종 답변 및 추천 결과를 생성(Generation)합니다.  
  * **Festival Feature (축제 정보)**: 사용자 현재 위치(위도/경도)를 받아 DB 내 축제 정보와의 거리를 실시간으로 계산하여 반경 내 주변 축제 목록을 거리순으로 제공하는 **LBS (Location-Based Service)** 로직을 담당합니다.  
  * **Market Feature (로컬 마켓)**: **SQLAlchemy ORM**을 통해 상품 게시물, 댓글, 판매자 정보의 **CRUD**를 처리합니다. 구매자와 판매자 간의 **게시판 및 댓글 기반 소통 기회 마련**을 위한 비즈니스 로직을 구현합니다.

#### **AI (인공지능) 및 데이터 관리 계층**

* **AI 프레임워크**: AI 기능 구현을 위해 **Langchain** 프레임워크를 활용하여 RAG 파이프라인의 구성 요소를 효율적으로 연결합니다. **Pandas**와 **PyTorch**는 데이터 전처리 및 임베딩 벡터 생성을 위해 사용됩니다.  
* **RAG 구성 기술**:  
  * **LLM (Generation)**: **OpenAI (GPT)** 모델을 사용하여 사용자 요청에 대한 자연어 답변 및 추천문을 생성합니다.  
  * **Vector DB (Retrieval)**: **FAISS** (또는 유사 기술)와 같은 벡터 검색 엔진을 활용하여 대규모 비정형 데이터 내에서 사용자 의도와 가장 유사한 정보를 고속으로 검색합니다.  
* **데이터베이스 (DB)**: **MySQL**을 사용하여 사용자 계정, 여행지, 축제, 마켓 상품 게시물, 댓글 등 모든 구조화된 데이터를 **관계형(Relational)** 형태로 저장하고 관리합니다.

#### **외부 API 계층**

* **한국관광공사 TourAPI**: 최신 관광지 및 축제 정보를 정기적으로 수집하고 DB에 업데이트하는 데이터 파이프라인의 주요 소스입니다.  
* **OpenAI API**: AI 추천 기능의 핵심인 임베딩 생성 및 최종 답변 생성을 위해 사용됩니다.

### **3.3 주요 엔진 및 기능 설계**

본 프로젝트의 핵심은 **AI 기반 RAG 추천 엔진**과 **지역 상생 커머스 엔진**의 두 가지 주요 엔진을 중심으로 설계되었으며, 이는 1차 보고서의 핵심 문제점(정보 파편화, 소상공인 홍보 부족)을 해결합니다.

#### **3.3.1. AI 기반 RAG 추천 엔진 상세 설계 (핵심 모듈 1\)**

**목표**: 사용자의 복합적인 취향을 파악하고, 신뢰할 수 있는 최신 데이터 기반의 여행지 추천 및 대화형 질의응답을 제공합니다. (TC-1, TC-2 충족)  
**주요 기술**: FastAPI, OpenAI API, LangChain, FAISS  
**상세 구현 내용**:

1. **데이터 소스 관리 및 벡터화**:  
   * **MySQL DB**에 저장된 정형 데이터(여행지 ID, 축제 기간 등)와 비정형 데이터(여행지 상세 설명, 사용자 후기 텍스트 등)를 추출합니다.  
   * 비정형 데이터는 **LangChain Text Splitters**를 이용해 Chunk 단위로 분할되고, **OpenAI Embeddings API**를 통해 벡터로 변환됩니다.  
   * 변환된 벡터는 고속 검색을 위해 **FAISS**와 같은 **전용 벡터 DB**에 저장되어, RAG의 검색 정확도를 위한 기반 데이터로 활용됩니다.  
2. **Advanced Retrieval (검색) 모듈 설계**:  
   * 초기에는 **단순 코사인 유사도** 기반으로 관련 문서를 검색합니다.  
   * **심화 구현 계획**: 향후 **멀티-쿼리(Multi-Query)** 전략이나 **HyDE(Hypothetical Document Embedding)** 기법을 도입하여, 사용자의 모호한 질문(예: "낭만적인 곳")에도 의도에 가장 근접한 문서를 검색해 검색 정확도를 높이도록 설계됩니다.  
3. **Advanced Prompt Engineering (프롬프트 구성) 모듈 설계**:  
   * 검색된 문맥 정보(Context)를 활용하여 LLM에게 답변 생성 지침을 제공하는 프롬프트를 구성합니다.  
   * **심화 구현 계획**: **Chain-of-Thought (CoT) 프롬프팅** 기법을 적용하여 LLM이 답변 생성 전에 **"1. Context 분석, 2\. 사용자 의도 파악, 3\. 추천 근거 도출"** 의 추론 과정을 거치도록 강제합니다. 이는 답변의 일관성과 신뢰도를 획기적으로 향상시킵니다.

**구현 상태**: FastAPI 내 RAG 파이프라인의 **Embedding** 및 **Retrieval 초기 모듈** 구현 완료. LangChain을 활용한 모듈 통합 및 LLM 연동 테스트 진행 중.

#### **3.3.2. Open AI 프롬프트 상세 설계**

**목표:**사용자로부터 입력받은 복합적인 여행 요구사항(`[요구사항]`)을 분석하고, 이를 RAG 엔진(3.3.1)이 명확하게 이해할 수 있는 상세한 '지시 프롬프트(Instruction Prompt)'로 동적 생성합니다.  
**주요 기술**: FastAPI(백엔드API), Pydantic(입력유효성검사), LangChain(AI 오케스트레이션**)**  
**상세 구현 내용:** 

1. **입력 파라미터 유효성 검증**  
   * **Pydantic 모델 정의**: 사용자가 API를 통해 전달하는 `[요구사항]`(대상 연령, 동행, 기간, 교통, 예산 등)을 Pydantic 모델로 정의하여 FastAPI 엔드포인트에서 자동으로 유효성을 검증합니다.  
   * 예외 처리: `기간: 1박 2일`인데 `교통: 당일치기 KTX`와 같이 상충되는 값이나 필수 값이 누락된 경우, 처리 불가를 반환하거나 기본값으로 보정하는 로직을 구현합니다.  
2. **의도 분석 및 키워드 확장 모듈**  
   * 사용자의 모호한 입력(예: `선호 스타일: 힐링`)을 RAG 검색(3.3.1)에 유리한 구체적 키워드로 확장합니다.  
   * 1단계 (매핑 테이블): '힐링' \-\> \['조용한', '자연', '산책로', '오션뷰 카페'\] 등 사전 정의된 맵(Map)을 기반으로 **확장 키워드를 생성**합니다.  
   * 2단계 (LLM 활용): (심화 구현) `[키워드 확장]` 규칙에 따라, "20대 여성이 친구와 힐링 여행"이라는 문맥을 LLM에 제공하여 `['해변', '노을', '감성 숙소']`와 같은 동적인 **확장 키워드를 추천**받습니다.  
3. **동적 프롬프트 템플릿 (Dynamic Prompt Templating)**  
   * **페르소나 주입**: `[역할]` (예: "당신은 한국의 소도시·중소도시 여행을 큐레이션하는 전문가입니다.")을 LLM의 시스템 프롬프트(System Prompt)로 고정하여 응답의 톤앤매너를 일관되게 유지합니다.  
   * **핵심 지시문 생성**: `Jinja2` 템플릿을 사용하여, 검증된 사용자 입력값과 확장된 키워드를 `[생성 규칙]`과 조합합니다.  
   * (예시 템플릿 일부)  
     ... \[규칙 1\] 반드시 '소도시'를 1곳 이상 포함하고 소도시 우선 정렬. \[규칙 2\] `transportation: {transportation}` 제약을 반드시 준수하는 동선. \[규칙 3\] `period: {period}`에 맞는 {N}일차 코스. \[규칙 4\] `budget: {budget}` 내 가성비(식비, 입장료) 고려. \[규칙 5\] 최근 120일 트렌드(`when: {when} 기준`) 반영. …  
   * **출력 형식 강제 (Output Formatting)**: LLM이 생성할 응답 형식을 `[출력 형식]`(JSON 스키마)에 명시된 구조로 엄격하게 강제합니다. 이는 RAG가 검색한 근거(`sources`)를 포함하도록 유도합니다.  
4. **응답 후처리 및 검증 (Post-processing)**  
   * **JSON 유효성 검사**: LLM이 생성한 텍스트 응답이 `[출력 형식]`에서 요구한 JSON 스키마를 준수하는지 파싱하여 2차 검증합니다.  
   * **제약 조건 준수 확인**: `[생성 규칙]`(예: 소도시 포함 여부, 예산 초과 여부)을 충족했는지 LLM의 답변을 재확인하는 검증 로직을 추가합니다.  
   * **신뢰도 처리**: RAG 검색 결과가 부족하여 `[생성 규칙]`을 준수하지 못할 경우, `[불확실 시 "데이터 부족" 명시]` 규칙에 따라 안전한 대안(예: "죄송합니다. '대중교통'으로 '1박 2일' 내에 '울릉도'를 다녀오는 것은 '데이터 부족'으로 추천이 어렵습니다.")을 반환합니다.

**구현 상태:** FastAPI 및 Pydantic을 이용한 `[요구사항]` 입력 파라미터 모델 정의가 완료되었습니다.  
핵심 `[생성 규칙]` 및 `[출력 형식]`을 포함하는 `Jinja2` 프롬프트 템플릿의 초안 설계가 완료되었습니다. 현재 3.3.1의 RAG 엔진과 연동하여, 생성된 동적 프롬프트가 LLM의 답변을 효과적으로 제어하는지 테스트 및 고도화 작업을 진행 중입니다.

#### **3.3.3. 지역 상생 커머스 엔진 상세 설계 (핵심 모듈 2\)**

**목표**: 지역 소상공인의 상품 홍보를 지원하고, **게시판 및 댓글**을 통해 구매자와 판매자 간의 **비동기적 소통 기회**를 마련합니다. (TC-6 충족)  
**주요 기술**: FastAPI, SQLAlchemy ORM, MySQL, RESTful API  
**상세 구현 내용**:

1. **데이터 모델링**:  
   * **MySQL DB**에 상품 게시물 테이블(`Product_Post`), 구매 요청 댓글 테이블(`Purchase_Comment`), 판매자 테이블(`Seller`) 등 관계형 스키마를 **SQLAlchemy ORM**으로 정의했습니다.  
   * `Product_Post` 테이블에는 상품 정보 외에 `post_status` (판매 중/예약/완료) 필드를 두어 거래 상태를 관리합니다.  
2. **비동기적 소통 시스템 설계 (게시판/댓글)**:  
   * **상품 게시 및 조회**: 판매자가 **RESTful API**를 통해 상품을 등록하고, 구매자는 `GET` 요청으로 목록을 조회합니다.  
   * **구매 의사 표현 (댓글)**: 구매 희망자가 특정 게시물에 댓글을 달아 **구매 의사**를 확정적으로 표현합니다.  
   * **거래 확정 로직**: 판매자는 자신의 게시물에 달린 댓글을 확인하고, 댓글 내용을 바탕으로 해당 상품의 `post_status`를 **Update**하는 API를 호출하여 **예약** 또는 **판매 완료** 상태로 변경합니다. 이로써 판매자와 구매자 간의 번거로운 실시간 매칭 없이 효율적으로 거래가 진행됩니다.  
3. **알림 기능 설계 (기본)**:  
   * 구매자가 댓글을 등록할 경우, Backend에서 판매자에게 알림(Notification)을 보낼 수 있도록 기본적인 알림 로직 및 API 호출 구조를 설계하고 있습니다.

**구현 상태**: FastAPI 내 **SQLAlchemy 기반의 상품 게시물 및 댓글 CRUD API 구현 완료**. 거래 상태 변경 로직 구현 중.

#### **3.3.4. LBS (Location-Based Service) 및 정보 통합 모듈 설계**

**목표**: 사용자의 현재 위치를 기반으로 주변 축제/명소를 추천하고, TourAPI 연동을 통해 데이터 최신성을 확보합니다.

**상세 구현 내용**:

1. **실시간 위치 기반 추천 로직**:  
   * **FE 위치 획득**: Frontend(React Native)는 GPS를 통해 사용자의 현재 위치 좌표(위도, 경도)를 백엔드로 전송합니다.  
   * **거리 계산**: Backend는 **Haversine 공식**을 사용하여 사용자 좌표와 MySQL DB 내에 저장된 모든 여행지/축제 좌표 간의 거리를 정확히 계산합니다.  
   * **필터링 및 정렬**: 계산된 거리를 기준으로 사용자 설정 반경 내의 콘텐츠만 필터링하고, **거리순으로 정렬**하여 '내 주변 명소' 리스트를 실시간으로 제공합니다.

2. **자동화된 데이터 통합 파이프라인**:  
   * **TourAPI 연동**: Python 스크립트를 사용하여 **한국관광공사 TourAPI**를 정기적으로 호출하여 최신 축제 및 행사 정보를 수집합니다.  
   * **DB 스케줄링**: 백엔드 시스템 스케줄러를 사용하여 **매일 오전 00시에 TourAPI 데이터 수집 및 MySQL DB 업데이트**를 자동으로 실행하도록 설계할 예정입니다. 이로써 데이터의 최신성과 정확성을 확보합니다.

### **3.4 주요 기능의 구현**

3.3 주요 엔진 및 기능 설계 섹션에서 기술된 핵심 엔진 중, Project-Summary 2.5절의 '주요 기능 리스트' 1번 항목인 TC-1 (RAG 기반 대화형 여행지 추천 및 질의응답)은 본 프로젝트의 가장 핵심적인 기능입니다.

TC-1 기능 구현을 위하여, LLM의 한계점인 환각(Hallucination) 현상을 방지하고 신뢰할 수 있는 최신 답변을 제공하기 위해, **(1) RAG 기반 신뢰성 확보 모듈**과 **(2) 정교한 프롬프트 엔지니어링 기반 생성 모듈**을 도입하고 구현하였습니다.

#### **3.4.1. 기능 구현 1: RAG 기반 신뢰성 확보 모듈 (Retrieval)**

**TC-1**의 '신뢰성 높은 추천'을 구현하기 위한 첫 번째 핵심 모듈은 사용자의 의도와 가장 관련성 높은 '근거 데이터(Context)'를 정확하게 검색(Retrieval)하는 RAG 모듈입니다. 이를 위해 `OpenAI Embeddings` API와 `FAISS` 벡터 DB 모듈을 도입하였으며, 다음과 같은 세부 기능을 구현하였습니다.

1. **데이터 소스 관리 및 벡터화 파이프라인 구현**  
   * **도입 기술:** `LangChain Text Splitters`, `OpenAI Embeddings API`  
   * **상세 구현:** 사용자의 신뢰할 수 있는 추천 근거를 마련하기 위해, MySQL DB에 저장된 정형 데이터(여행지, 축제 정보)와 비정형 데이터(상세 설명, 최신 사용자 후기 텍스트)를 수집하는 파이프라인을 구현했습니다.  
   * 비정형 텍스트는 `LangChain`의 `Text Splitters` 모듈을 사용하여 의미 있는 단위(Chunk)로 분할하고, `OpenAI Embeddings` API를 호출하여 고차원 벡터로 변환하는 임베딩 과정을 구현하였습니다.

2. **FAISS 벡터 DB 도입 및 문맥 검색(Retrieval) 모듈 구현**  
   * **도입 기술:** `FAISS (Facebook AI Similarity Search)`  
   * **상세 구현:** 변환된 대규모 벡터 데이터를 고속으로 검색하기 위해 인-메모리(in-memory) 벡터 DB인 `FAISS` 모듈을 도입했습니다.  
   * 사용자의 질문이 3.4.2의 NLU 모듈을 통해 벡터화되면, 해당 벡터를 `FAISS` DB로 전송하여 코사인 유사도(Cosine Similarity)가 가장 높은 Top-K개의 관련 문서(Chunk)를 검색하는 '문맥 검색 모듈'을 구현하였습니다. 이 모듈이 반환하는 '근거 데이터(Context)'는 LLM의 환각을 방지하고 답변의 신뢰성을 확보하는 핵심 재료로 사용됩니다.

#### **3.4.2. 기능 구현 2: 정교한 프롬프트 엔지니어링 기반 생성 모듈 (Generation)**

**TC-1**의 '사용자 맞춤형 추천'을 구현하기 위한 두 번째 핵심 모듈은 3.4.1에서 검색된 '근거 데이터'를 활용하여, 사용자의 복합적인 요구사항을 충족하는 최종 답변을 일관된 형식으로 생성(Generation)하는 모듈입니다. 이를 위해 `OpenAI GPT-4o` LLM을 도입하였으며, LLM을 제어하기 위한 **'맞춤형 프롬프트 템플릿'**과 **'구조화된 출력 파서'**를 구현하였습니다.

1. **'소소행' 맞춤형 프롬프트 템플릿 구현**  
   * **도입 기술:** `OpenAI GPT-4o`, 자체 프롬프트 템플릿  
   * **상세 구현:** LLM이 일관된 역할과 규칙, 형식에 따라 답변을 생성하도록 강제하는 '소소행 맞춤형 프롬프트 템플릿'을 \[그림 3-1\]와 같이 설계하고 구현하였습니다.  
   * 이 템플릿은 단순한 텍스트가 아닌, (1)사용자 Query에서 추출된 `[요구사항]` 변수들과 (2) 3.4.1의 RAG 모듈이 검색한 `[근거 데이터]`가 동적으로 주입(inject)되는 **제어 모듈**로 작동합니다.

**\[그림3-1\] '소소행' AI 추천 제어를 위한 핵심 프롬프트 템플릿 구조**

| \[역할\] 당신은 한국의 소도시·중소도시 여행을 큐레이션하는 전문가입니다. 아래 요구사항을 모두 반영하여 여행지 {recommend}곳을 추천하세요. \[요구사항\] \- 대상: {age} 연령대, 동행: {relation}, 인원: {people}명 \- 기간: {period}, 시기: {when}, 교통: {transportation} \- 선호 스타일: {style} \- 예산: {budget} \- 기타: {etc} \[생성 규칙\] 1\. 소도시 최소 1곳 이상 포함, 가능하면 다수. 결과는 소도시 우선 정렬. 2\. 최근 트렌드(지난 120일) 반영. 3\. 각 후보에 대해    \- "왜 지금?": 트렌드·시기성 1문장    \- "무엇을 할까": 핵심 활동/코스 1문장, 동선 간단    \- "요구사항 적합성": 사용자 제약과의 매핑 1문장 4\. RAG 근거 sources 포함(문서명/요약/선택적 URL). 5\. 교통수단 제약(예: 대중교통 위주/자가용)과 기간 제약(예: 1박2일이면 2일 동선) 준수. 6\. 예산 내 가성비 고려(입장료/체험/이동/식비 러프 가이드). 7\. 불확실 시 “데이터 부족” 명시 후 안전한 대안 제시. 8\. 말투는 존댓말, 과장 금지, 간결하게. \[키워드 확장\] \- 사용자의 의도를 반영하는 확장 키워드 2–3개를 제시(예: ‘해변, 노을, 케이블카’). \[출력 형식 \- 반드시 그대로 준수\] 1\. 요약 섹션 (자연어)    "{주요 요구사항 요약}에 맞는 여행을 선호하시는군요\! {요구사항}을 위해 '{확장 키워드1}', '{확장 키워드2}'{(선택) '확장 키워드3'}로 키워드를 확장했습니다.    당신에게 꼭 맞는 여행지 {recommend}곳을 추천해드립니다." 2\. 출력(JSON 스키마)    { "results": \[...\], "validation\_checklist": {...} } 3\. 최종 한 줄 안내:    "※ 일부 정보는 운영 상황에 따라 변동될 수 있으니 방문 전 최신 안내를 확인해 주세요." |
| :---- |

2. **제약-기반 생성 및 구조화된 JSON 출력 파서 구현**  
   * **상세 구현:** LLM이 \[그림 3-1\]의 `[생성 규칙]`과 `[출력 형식]`이라는 엄격한 제약 조건(Constraints) 하에 응답을 생성하도록 구현하였습니다.  
   * 특히 `[생성 규칙]` 4번(RAG 근거 포함)은 LLM이 반드시 3.4.1에서 검색된 근거를 바탕으로 답변하도록 강제하여 신뢰성을 확보합니다.  
   * `[출력 형식]` 2번(JSON 스키마 준수) 규칙은 LLM이 생성하는 자연어 답변을 항상 기계가 읽을 수 있는(machine-readable) JSON 형식으로 반환하도록 강제합니다.  
   * FastAPI 백엔드 서버는 이 JSON 응답을 안정적으로 파싱(parsing)하여 React Native 클라이언트로 전송합니다. 이를 통해 클라이언트는 복잡한 텍스트 파싱 없이도 '요약 섹션', '왜 지금?' 등 기획된 UI 컴포넌트에 데이터를 정확히 매핑하여 안정적인 렌더링을 수행합니다.

#### **3.4.3. RAG 기반 대화형 여행지 추천 (TC-1) Flow Diagram**

1. **사용자 Query 입력 (Client)**: 사용자가 앱 챗봇에 질문(예: "혼자 조용히 걷기 좋은 가을 여행지를 추천해 줘.")을 입력합니다.  
2. **API 호출 (Client → Server)**: Frontend는 FastAPI의 `/api/recommend/chat` 엔드포인트로 사용자 Query를 포함한 `POST` 요청을 전송합니다.  
3. **벡터화 (Server \- Embedding)**: FastAPI 서버는 수신된 Query를 **OpenAI 임베딩 모델**을 사용하여 벡터로 변환합니다.  
4. **문맥 검색 (Server \- Retrieval)**: 변환된 Query 벡터를 **FAISS 벡터 DB**에 전송하여, 코사인 유사도가 가장 높은 **Top-K 문서(여행지 상세, 후기 등)**를 검색합니다.  
5. **프롬프트 구성 (Server \- Prompt Formulation)**: 검색된 **Context 문서**와 사용자 Query를 결합하여 **추론을 유도하는(CoT) 최종 프롬프트**를 구성합니다.  
6. **응답 생성 (Server \- Generation)**: 구성된 프롬프트를 **OpenAI/Gemini LLM API**에 전송하여, **추천 근거가 명확한** 여행지 추천 목록과 답변 텍스트를 JSON 형식으로 생성받습니다.  
7. **응답 반환 및 표시 (Server → Client)**: FastAPI 서버는 JSON 형식의 추천 결과를 Frontend로 반환하고, 앱은 추천 리스트와 근거를 함께 사용자에게 표시합니다.

#### **3.4.4. Open AI 프롬프트 Flow**

본 흐름은 3.4.3의 5단계(프롬프트 구성)와 6단계(응답 생성)를 더욱 상세하게 기술한 것이며, `3.3.2. Open Al 프롬프트 상세 설계` 및 `3.4.2. 정교한 프롬프트 엔지니어링 기반 생성 모듈`이 실제로 작동하는 상세 구현 흐름을 보여줍니다.

이 흐름의 핵심 목표는 사용자의 모호한 입력을 명확한 `[요구사항]` 변수로 변환하고, RAG `[근거 데이터]`와 결합하여, LLM이 `[출력 형식]`을 반드시 준수하도록 제어하는 것입니다.

1. **API 요청 및 요구사항 분석 (FastAPI \+ Pydantic)**  
   * Client가 사용자의 자연어 입력(예: "주말에 KTX로 갈 만한 조용한 소도시")과 함께 `/api/recommend/chat`엔드포인트를 호출합니다.  
   * FastAPI 백엔드는 `3.3.2.1`에서 Pydantic으로 구현된 유효성 검증 모델을 통해 사용자의 입력을 파싱(parsing)하고 정제합니다.  
   * (예: `{period: '주말'}`, `{transportation: 'KTX'}`, `{style: '조용한'}`)  
2. **의도 확장 및 RAG 근거 데이터 요청**  
   * `3.3.2.2`에서 구현된 '키워드 확장 모듈'이 작동합니다.  
   * '조용한'과 같은 모호한 키워드가 RAG 검색에 유리하도록 \['한적한', '자연', '산책로'\] 등 구체적인 동의어/연관 키워드로 확장됩니다.  
   * 확장된 키워드를 포함한 사용자 Query 벡터를 `3.4.1`의 RAG 모듈로 전달하여, 관련성 높은 Top-K의 `[근거 데이터]`(Context 문서들)를 검색해옵니다.  
3. **동적 프롬프트 조립 (Prompt Assembly)**  
   * `3.4.2`의 `[그림 3-1]` 프롬프트 템플릿을 로드합니다.  
   * 템플릿의 각 변수 슬롯(Slot)에 (1)에서 분석된 `[요구사항]` 변수들과 (2)에서 검색된 `[근거 데이터]`(RAG Context)를 동적으로 주입(inject)하여 LLM에 전달할 최종 프롬프트를 완성합니다.  
4. **제약-기반 생성 요청 (Constrained Generation)**  
   * 완성된 최종 프롬프트를 `OpenAI GPT-4o` API로 전송합니다.  
   * 이때, 프롬프트의 `[생성 규칙]`과 `[출력 형식]`(JSON 스키마)이 LLM의 응답을 강력하게 제어하는 제약 조건(Constraints)으로 작동합니다.  
5. **응답 후처리 및 JSON 파서 구현 (Post-processing)**  
   * LLM으로부터 텍스트 기반의 응답(JSON 형식의 문자열)을 수신합니다.  
   * `3.4.2.2`에서 구현된 '구조화된 JSON 출력 파서'가 이 문자열을 파싱합니다.  
   * **(성공 시):** 유효한 JSON 객체로 변환되었는지, 그리고 `[출력 형식]` 스키마를 준수하는지 2차 검증을 수행합니다.  
   * **(실패 시):** LLM 응답이 JSON 형식을 준수하지 않았거나 파싱에 실패한 경우, "데이터 부족" 또는 "안전한 대안" 응답(from `[생성 규칙]` 7번)을 생성하여 Client에 반환함으로써 앱의 비정상적인 종료를 방지합니다.  
6. **최종 구조화 데이터 반환**  
   * 모든 검증을 통과한 최종 JSON 객체를 Client(React Native)로 반환합니다. Client는 이 구조화된 데이터를 받아 복잡한 파싱 로직 없이 UI 컴포넌트에 즉시 매핑합니다.

#### **3.4.5. 로컬 마켓 게시판 거래 및 소통 Flow**

1. **상품 게시물 조회 (Client → Server)**: 구매자가 마켓 페이지에 접속하면, Frontend는 `/api/market/posts` 엔드포인트에 `GET` 요청을 보냅니다.  
2. **게시물 목록 반환 (Server → Client)**: Backend는 **MySQL DB**에서 최신 상품 게시물 목록을 조회하여 반환합니다.  
3. **구매 문의/의사 표현 (Client → Server)**: 구매자가 특정 상품 상세 페이지에서 '댓글 작성' 기능을 통해 **구매 의사**를 담은 댓글을 등록합니다.  
4. **댓글 저장 및 알림 (Server)**: Backend는 댓글 내용을 **`Purchase_Comment` 테이블**에 저장하고, 판매자에게 알림을 보낼 기본적인 로직을 실행합니다.  
5. **거래 상태 확인 및 변경 (판매자 Client → Server)**: 판매자가 앱에서 댓글을 확인하고, 구매자와의 소통(앱 외부/내부)을 통해 거래가 확정되면, `/api/market/posts/{post_id}/status` 엔드포인트에 `PUT` 요청을 보내 게시물의 상태를 **'예약'** 또는 **'판매 완료'**로 변경합니다.  
6. **상태 업데이트 (Server)**: Backend는 요청을 받아 DB의 `Product_Post` 테이블의 `post_status` 필드를 업데이트하고, 모든 사용자에게 최신 상태를 반영합니다.

#### **3.4.6. LBS 기반 주변 축제 추천 Flow**

1. **위치 정보 획득 및 요청 (Client → Server)**: Frontend는 모바일 기기의 GPS를 통해 사용자의 **현재 위도/경도**좌표를 획득하고, `/api/festival/nearby` 엔드포인트로 전송합니다.  
2. **거리 계산 및 필터링 (Server)**: Backend는 수신된 좌표와 **MySQL DB**에 저장된 축제/명소 좌표를 **Haversine 공식**으로 계산합니다.  
3. **정렬 및 반환 (Server → Client)**: 계산된 거리를 기준으로 반경 내의 유효한 축제 목록을 **오름차순(거리순)** 으로 정렬하여 Frontend에 반환합니다.  
4. **결과 표시 (Client)**: 모바일 앱은 '내 주변 축제' 지도 화면 또는 리스트에 사용자 위치와 정렬된 축제 정보를 실시간으로 표시합니다.

### **3.5 기타(AI 기술 활용)**

#### **3.5.1. AI 모델 및 기술 스택 상세**

본 프로젝트는 RAG(검색 증강 생성) 기술을 핵심으로 활용하여, LLM의 한계인 환각(Hallucination) 현상을 방지하고 최신 정보를 기반으로 한 신뢰성 높은 추천을 제공합니다.

| 분류 | 기술/모델 | 역할 및 상세 구현 내용 |
| :---: | :---: | ----- |
| **거대 언어 모델 (LLM)** | **OpenAI GPT-4o**(API 활용) | **Generation**: 프롬프트 엔지니어링을 통해 정제된 Context를 바탕으로 자연어 답변 및 여행지 추천 목록을 생성합니다. 사용자 질문의 의도를 파악하고, 감성적인 톤앤매너로 답변을 구성합니다. |
| **임베딩 모델** | **OpenAI Embeddings**(또는 유사 모델) | **Embedding**: 사용자 Query 및 **MySQL DB** 내 관광지/후기 텍스트를 고차원 벡터 공간으로 변환합니다. 벡터 유사도 검색(Retrieval)의 기반이 됩니다. |
| **벡터 데이터베이스** | **FAISS 또는 전용 벡터 DB** | **Retrieval**: 벡터화된 데이터를 저장하고, 코사인 유사도(Cosine Similarity)를 기반으로 사용자 Query와 가장 유사한(관련성 높은) 문서를 빠르게 검색하여 LLM에 전달하는 기능을 수행합니다. MySQL에서 추출한 비정형 데이터의 고속 검색을 담당합니다. |
| **프롬프트 엔지니어링** | 자체 시스템 프롬프트 정의 | **Control**: LLM이 일관된 형식과 높은 가독성으로 응답을 생성하도록 '시스템 프롬프트'를 정의합니다. (예: "당신은 사용자에게 남들과 다른 소소한 여행지를 추천하는 친절하고 전문적인 여행 가이드이다. 반드시 검색된 근거를 바탕으로 답변해야 하며, 답변 말미에 추천 근거를 간략히 명시할 것.") |

#### **3.5.2. AI 활용에 대한 실험 및 검증 계획**

**AI 추천 품질 검증 계획**:

1. **Baseline 설정**: 단순 키워드 매칭(Keyword Matching) 또는 통계 기반 추천 결과를 Baseline으로 설정합니다.  
2. **RAG 성능 비교**:  
   * **정확도(Factuality)**: 사용자 질문 100개를 대상으로 LLM이 **RAG 기반**으로 답변한 결과와, RAG 없이(Zero-shot) 답변한 결과를 비교하여 사실적 정확도(Factuality)를 평가합니다. (**목표: RAG 기반 90% 이상**)  
   * **사용자 만족도(Satisfaction)**: 내부 팀원 또는 초기 사용자 그룹을 대상으로 추천 결과의 신뢰도 및 만족도를 5점 척도로 평가하여 Baseline 대비 향상도를 측정합니다. (**목표: 20% 이상 향상**)  
3. **Advanced RAG 모듈 검증 (핵심 실험)**:  
   * **목적**: Retrieval 및 Prompting의 최적화 효과 입증.  
   * **방법**: **Advanced Retrieval (HyDE/Multi-Query)**과 **Advanced Prompt Engineering (CoT)** 를 각각 적용한 경우와 기본 RAG를 비교하여, 검색 적합성(Relevance) 및 답변의 논리적 일관성이 통계적으로 유의미하게 향상되었는지 측정합니다.  
4. **검증 방법**: 추천 결과의 텍스트를 파싱하여, 추출된 Context(검색된 문서)와 생성된 답변 간의 **일치도(Grounding Score)** 를 측정하고, 사용자 피드백을 수집하여 알고리즘을 반복적으로 개선할 예정입니다.

#### **3.5.3. LLM과 RAG의 연관성**

**TC-1 (대화형 여행지 추천):**

* **연관성**: LLM(GPT/Gemini)은 대화의 문맥을 이해하고 자연스러운 추천 문장을 생성하는 '언어 능력'을 제공합니다. RAG는 LLM에게 **MySQL DB**에 존재하는 **'최신 사실 정보'**(한국관광공사, 지역 마켓 상품, 사용자 후기 등)를 제공합니다. 이 둘의 결합을 통해 "최신 정보를 기반으로 근거를 제시하는 대화형 추천"이 가능해집니다.

**TC-5 (지역 축제 및 행사 정보 조회):**

* **연관성**: TourAPI를 통해 수집된 축제/행사 정보는 DB에 저장되고 벡터화되어 RAG의 Context로 활용됩니다. 사용자가 "다음 주 부산 근처의 '가족과 함께 갈 만한' 축제는 무엇인가요?"라고 질문하면, RAG는 DB에서 '부산', '다음 주'와 관련된 축제 정보를 검색합니다. LLM은 검색된 기술적인 정보 (축제 기간, 장소)를 바탕으로 사용자의 감성적 의도('가족과 함께 갈 만한')를 반영하여 친절하고 가독성 높은 형태의 정보로 가공하여 제공합니다.

### **3.6 개발 현황**

#### **설계 (Design)**

* **아키텍처 확정**: React Native (FE) \- FastAPI (BE) \- **MySQL (DB)** 기반의 3계층 구조 설계를 완료하고, AI 엔진(LLM/RAG) 연동 확장을 고려한 모듈 분리 구조를 확정했습니다.  
* **DB 스키마**: 여행지, 사용자, 후기 등 핵심 데이터 모델링 및 **관계형 스키마** 설계를 완료했습니다. **FAISS/Vector DB** 연동을 위한 **MySQL 데이터 추출 및 정제 파이프라인** 구성을 준비하고 있습니다.  
* **API 명세**: 주요 기능(추천, 검색, 후기, 마켓)에 대한 RESTful API 엔드포인트 명세를 정의했습니다.

#### **개발 (Development)**

* **Frontend (React Native)**: 메인 추천, 상세 정보 페이지 등 핵심 UI/UX 화면 구현 및 **Backend API 연동**을 완료했습니다. 사용자 입력 및 화면 전환 흐름이 정상 작동함을 확인했습니다.  
* **Backend (FastAPI)**:  
  * **기본 단계 구현 완료**: **SQLAlchemy ORM** 기반의 **MySQL DB 연동** 및 여행지, 축제, 마켓 상품의 **기본 CRUD (Create, Read, Update, Delete) API** 구현을 완료했습니다.  
  * **초기 AI 모듈**: TourAPI 데이터 수집 파이프라인의 초기 버전 및 RAG의 **Embedding/Retrieval 초기 모듈** 개발에 집중하고 있습니다.  
* **Database (MySQL)**: 설계된 관계형 스키마에 따라 테이블 생성을 완료하고 개발용 초기 데이터를 구성했습니다.

#### **검증 (Verification)**

* **사용성 테스트**: 개발된 핵심 화면을 대상으로 내부 팀원 간의 1차 사용성 및 UI 흐름 검토를 완료했습니다.

#### **향후 계획 (Next Steps)**

* **데이터 파이프라인 자동화**: 백엔드 스케줄러를 사용하여 **MySQL DB**가 **매일 오전 00시에 TourAPI에서 최신 정보**를 자동으로 업데이트하고 정제하도록 시스템을 수정할 예정입니다.  
* **RAG 알고리즘 심화**: RAG 파이프라인의 **Generation 단계** 개발에 착수하고, 프롬프트 엔지니어링을 심화하여 추천문의 **신뢰도와 가독성**을 극대화하는 알고리즘을 완성할 예정입니다.

### **3.7 최종 목표**

본 프로젝트는 AI 기반 소도시 여행 추천 플랫폼 구축을 통해 관광객 유입 증대와 지역 소상공인 경제 활성화를 목표로 하며, 2025년 12월까지 아래의 구체적인 목표를 달성한다.

**1\. AI 기반 여행 추천 시스템 구축 (RAG 포함)**  
1.1 추천 정확도 확보: RAG 및 LLM을 활용하여, 기존 키워드 검색 방식 대비 사용자 만족도 기반 여행지 추천 정확도를 20% 이상 향상시킨다.  
1.2 챗봇 구현: 사용자 질문에 대한 90% 이상의 정확도로 응답하는 대화형 챗봇 기능을 구현하여 TC-1 요구사항을 충족시킨다.

**2\. 소상공인 연계 로컬 마켓 구현**  
2.1 플랫폼 연계: 소상공인 및 상품 등록 기능을 구축하여 10개 이상의 지역 소상공인과 50개 이상의 지역 특산품/서비스 상품 등록을 완료한다.  
~~2.2 실시간 통신: gRPC 기반의 실시간 통신 환경을 구현하여 사용자-판매자 간의 상품 문의, 예약, 주문 데이터 교환 지연 시간을 50ms 미만으로 유지한다.~~   
2.2 온라인 소통 채널 확보: RESTful API 기반의 게시판 및 댓글 시스템을 구현하여 소상공인과 구매자 간의 비동기적 소통 채널을 마련한다. 이를 통해 상품 문의 및 구매 의사 교환을 효율적으로 지원한다.

**3\. 통합 정보 제공 및 모바일 환경 최적화**  
3.1 정보 통합: 한국관광공사 API를 활용한 축제/행사 정보와 LLM 추천 결과를 통합하여 소도시 20곳 이상의 명소 및 이벤트를 1차 데이터베이스에 구축한다.  
3.2 모바일 앱 완성: 주요 기능(여행 추천, 로컬 마켓, 축제 정보)을 탑재한 iOS 모바일 애플리케이션 1개를 완성하여 사용자들이 언제 어디서든 편리하게 접근할 수 있도록 한다.
